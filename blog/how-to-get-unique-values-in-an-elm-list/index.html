<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>How to get unique values in an Elm list? — Diogo Silva</title>
	<meta name="description" content="Title: How to get unique values in an Elm list?; Date: 2021-01-28; Author: Diogo Silva">
	<meta name="author" content="Diogo Silva">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="/theme/html5.js"></script>
		<![endif]-->
	<link href="/theme/css/ipython.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/simplex/bootstrap.min.css" rel="stylesheet">
	<link href="/theme/css/local.css" rel="stylesheet">
	<link href="/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<div class="page-header">
		<h1><a href="/">Diogo Silva</a>
			<br>	</div>
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="text-center article-header">
		<h1 itemprop="name headline" class="article-title">How to get unique values in an Elm list?</h1>
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<h4 itemprop="name">Diogo Silva</h4>
		</span>
		<time datetime="2021-01-28T00:00:00+00:00" itemprop="datePublished">qui 28 janeiro 2021</time>
	</div>
<!---	
	<div>
		Category:
		<span itemprop="articleSection">
			<a href="/category/0001_elm_get_unique_values.html" rel="category">0001_elm_get_unique_values</a>
		</span>
	</div>
--->
 
	<div>
		Tags:
		<span itemprop="keywords">
			<a href="/tag/elm.html" rel="tag">Elm</a>
		</span>
	</div>
	<div itemprop="articleBody" class="article-body"><p>You do it like this:</p>
<div class="highlight"><pre><span></span><code><span class="nv">unique</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"></span>
<span class="nv">unique</span><span class="w"> </span><span class="nv">l</span><span class="w"> </span><span class="nf">=</span><span class="w"></span>
<span class="w">    </span><span class="kr">let</span><span class="w"></span>
<span class="w">        </span><span class="nv">incUnique</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"></span>
<span class="w">        </span><span class="nv">incUnique</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="nv">lst</span><span class="w"> </span><span class="nf">=</span><span class="w"></span>
<span class="w">            </span><span class="kr">case</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">member</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="nv">lst</span><span class="w"> </span><span class="kr">of</span><span class="w"></span>
<span class="w">                </span><span class="kt">True</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">lst</span><span class="w"></span>
<span class="w">               </span><span class="kt">False</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="nf">::</span><span class="w"> </span><span class="nv">lst</span><span class="w"></span>
<span class="w">    </span><span class="kr">in</span><span class="w"></span>
<span class="w">        </span><span class="kt">List</span><span class="nf">.</span><span class="nv">foldr</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="nv">l</span><span class="w"></span>
</code></pre></div>

<p>There you go. Have fun!</p>
<hr>
<p>Oh, still here? Let’s see what this is doing then.</p>
<p>So, you have a list in Elm and you want to get the unique values in it. And there is no way to write a simple imperative loop to iterate over the list. List.fold to the rescue. We have 2 folds we can use: <em>foldl</em> (fold left) and <em>foldr</em> (fold… you can figure it out). The left and right refer to the associativity of the operation.</p>
<p>Say you have the list [2, 2, 3, 4]. If you fold the list, it means you’ll go over the list pairing 2 items and applying some function, e.g. folding this list with the + operation would get us:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p><img alt="Fold diagram" src="fold_diagram.png"></p>
<p>This is right associativity, by the way, so I did a foldr. We can see more 
clearly what’s going on looking at the diagram. There, our function <em>f</em> is the <em>+</em> operation and our seed is <em>0</em>.</p>
<p>The foldl would look like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>In Elm we have <em>List.foldl</em> and <em>List.foldr</em>.
 In addition to the function to apply and the list, we also have to 
supply a seed value to apply to the first element of the list, e.g. if 
our seed was 0, we’d have a foldr like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>This
 is how folding works. We can use it for more advanced data structure 
traversal, but we’ll only use it to find unique values here. We will 
start with an empty list (our seed) and check if the elements in the 
original list are n this new list. If they are, we do nothing. If they 
are not, we add them to that list (or rather we create a new list with 
the elements of that list plus the new element, since there’s is no 
mutability in Elm land).</p>
<p>Let’s define our function:</p>
<div class="highlight"><pre><span></span><code><span class="nv">incUnique</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"></span>
<span class="nv">incUnique</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="nv">lst</span><span class="w"> </span><span class="nf">=</span><span class="w"></span>
<span class="w"> </span><span class="kr">case</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">member</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="nv">lst</span><span class="w"> </span><span class="kr">of</span><span class="w"></span>
<span class="w"> </span><span class="kt">True</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">lst</span><span class="w"></span>
<span class="w"> </span><span class="kt">False</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="nf">::</span><span class="w"> </span><span class="nv">lst</span><span class="w"></span>
</code></pre></div>

<p>This function receives a list element and a list. If the element is a member of that list, it returns the list. If it’s not, it returns a new list containing all the elements of the received list plus the received 
element. Then we use the fold with this function.</p>
<div class="highlight"><pre><span></span><code><span class="nv">someList</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">]</span><span class="w"></span>
<span class="kt">List</span><span class="nf">.</span><span class="nv">foldr</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="nv">someList</span><span class="w"></span>
</code></pre></div>

<p>Here’s what’s happening</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>See, we’re folding from the right. What if we folded from the left?</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>It’s less clear that we’re folding from the left because the list element is always the left operand of the function. This caused the list to look inverted in the expression. As it turns out, our final result also inverts the original list, with the duplicates removed. This is because our function <em>incUnique</em> adds new elements to the front of the list. If it added to the back of the list, <em>foldr</em> would invert the list and <em>foldl</em> would preserve order. Go back to the diagram above and imagine what it would like for a left fold.</p>
<p>Putting it all together:</p>
<div class="highlight"><pre><span></span><code><span class="nv">unique</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"></span>
<span class="nv">unique</span><span class="w"> </span><span class="nv">l</span><span class="w"> </span><span class="nf">=</span><span class="w"></span>
<span class="w">    </span><span class="kr">let</span><span class="w"></span>
<span class="w">        </span><span class="nv">incUnique</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="w"></span>
<span class="w">        </span><span class="nv">incUnique</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="nv">lst</span><span class="w"> </span><span class="nf">=</span><span class="w"></span>
<span class="w">        </span><span class="kr">case</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">member</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="nv">lst</span><span class="w"> </span><span class="kr">of</span><span class="w"></span>
<span class="w">            </span><span class="kt">True</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">lst</span><span class="w"></span>
<span class="w">            </span><span class="kt">False</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="nf">::</span><span class="w"> </span><span class="nv">lst</span><span class="w"></span>
<span class="w">     </span><span class="kr">in</span><span class="w"></span>
<span class="w">    </span><span class="kt">List</span><span class="nf">.</span><span class="nv">foldr</span><span class="w"> </span><span class="nv">incUnique</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="nv">l</span><span class="w"></span>
</code></pre></div>

<p>What do you think? How would you improve on this? Drop me a message at <a href="mailto:blog@diogoaos.com">blog@diogoaos.com</a>.</p></div>
	<hr>
	<!---
	<h2>Comments</h2>
	--->
</div>
		</div>
	</div> 	<!-- <hr> -->
</div> <!-- /container -->

<footer class="aw-footer bg-danger">
	<div class="container"> <!-- footer -->
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="row">
					<div class="col-md-3">
						<h4>Navigation</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="">Diogo Silva</a></li>
							<li><a href="/blog/"><i class="fa fa-Blog "></i> Blog</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Author</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://github.com/diogo-aos">Github</a></li>
							<li><a href="https://www.linkedin.com/in/diogoaos">LinkedIn</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>

<!---
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center center-block aw-bottom">
			<p>&copy; Diogo Silva 2016</p>
		</div>
	</div>
</div>
--->

<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>
</body>
</html>